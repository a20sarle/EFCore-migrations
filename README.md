# Update database using EF Core Code First

## Requirements for updating database using migrations
- ```context.Database.Migrate();``` must be used in the builder / Startup.cs file. ```EnsureCreated()``` does not create the database based on the migration history and therefore it doesn't let the database to be updated using migrations [1].
- The database needs to have one table storing all the migrations, the autogenerated file is called "__EFMigrationsHistory".
- Install EF Core command-line tools using `Install-Package Microsoft.EntityFrameworkCore.Tools` in Package Manager Console [2] to manage migrations from CLI [3].

[1]: https://stackoverflow.com/questions/38238043/how-and-where-to-call-database-ensurecreated-and-database-migrate
[2]: https://docs.microsoft.com/en-us/ef/core/cli/powershell
[3]: https://docs.microsoft.com/en-us/ef/core/managing-schemas/migrations/managing?tabs=vs

## Create a EFMigrationshistory table in the database
1. 

## Commands

Package manager Console                             | CLI                                        | Description
------------------------------                      | -----------------------------------------  | ----------------------
`Add-Migration <migrationName>`                     | `dotnet ef migrations add <migrationName>` | Creates migration
`Update-Databse`                                    | `dotnet ef database update`                | Updates the database based on the migration history
`Update-Database -Migration:"<migrationname>"`      | ?                                          | Rollback to a specific version of the database 
`Remove-Migration`                                  | `dotnet ef migrations remove`              | removes the last migration
`Update-Database -Migration 0`                      | ?                                          | reset / empty database


## Update database Step by step
1. 

## Other resources
Add _EFMigrationsHistory file: https://www.entityframeworktutorial.net/efcore/entity-framework-core-migration.aspx

